<root data-root="JavaScript字符串">
    <!-- 字符串详解 -->
    <section>
        <h3>字符串详解</h3>
        <p>在JavaScript中，所谓的字符串就是包含在英文“双引号”或‘单引号’中的内容，可以是数字、运算符号、各国语言、特殊编码字符，甚至还能是HTML的标签。也就是说，只要符合在“双引号”或‘单引号’中这个要求，计算机文本中的内容基本上都可以成为一个字符串。</p>
        <p>在使用字符串的引号时需要注意，如果一个字符串已经使用过引号，若需要再在字符串内使用引号需要使用另外一个引号，即双引号内使用单引号，单引号内使用双引号，或者使用<em>转义符“\”</em>对同样的引号进行转换，多层引号嵌套，该规则同样适用，如：</p>
        <code class="indent">
            <img src="img/code/jscode/code-js-076.jpg">
        </code>
        <p>在控制台中逐行运行的结果为：</p>
        <code class="indent">
            <img src="img/code/jscode/code-js-077.jpg">
        </code>
        <p>需要了解的一个字符串的常识就是，字符串不能直接分成多行去写，否则浏览器会报错，每行都加上完整的引号，返回的值又只有最后一个字符串：</p>
        <code class="indent">
            <img src="img/code/jscode/code-js-078.jpg">
        </code>
        <p>如果字符串过长，需要进行换行使视觉层次上更加地清晰，那需要这样去写：</p>
        <code class="indent">
            <img src="img/code/jscode/code-js-079.jpg">
        </code>
        <p>反斜杠“\”在字符串中有特殊用途，用来表示一些特殊的字符，所以又称转义符，以下是一些常用转义符的表示法：（小括号中的值表示法为<em title="用于表示计算机中的字符，覆盖面相当广，甚至包含中日韩绝大部分的文字">Unicode码</em>）</p>
        <ul class="indent">
            <li>\0（或：\u0000）用于表示：null</li>
            <li>\b（或：\u0008）用于表示：后退键</li>
            <li>\f（或：\u000C）用于表示：换页符</li>
            <li>\n（或：\u000A）用于表示：换行符</li>
            <li>\r（或：\u000D）用于表示：回车键</li>
            <li>\t（或：\u0009）用于表示：制表符</li>
            <li>\v（或：\u000B）用于表示：垂直制表符</li>
            <li>\'（或：\u0027）用于表示：单引号</li>
            <li>\"（或：\u0022）用于表示：双引号</li>
            <li>\ （或：\u005C）用于表示：反斜杠</li>
        </ul>
        <p>当然，转义符远不止上面列出的这些，每个Unicode码都有各自对应的字符，如“"\251"”（八进制表示法）、“\xA9”（十六进制两位表示法）和“\u00A9”（十六进制四位表示法）就是用于输出版权符号“&copy;”的（在HTML中表示版权符号的是“&amp;copy;”）。需要注意的是转义符本身也是字符串，在使用的时候也需要加上英文的引号。</p>
        <code class="indent">
            <img src="img/code/jscode/code-js-080.jpg">
        </code>
        <p>另外，在“非特殊”字符前面加上转义符“\”，那“\”会被省略掉，如果需要输出“\”，那就需要写成“\\”的形式。但是要特别注意那些有实际作用的转义符对输出内容的影响，如：</p>
        <code class="indent">
            <img src="img/code/jscode/code-js-081.jpg">
        </code>
        <p>在JavaScript引擎内部，所有字符都用Unicode表示，它不仅以Unicode储存字符，还允许直接在程序中使用Unicode编号表示字符。解析代码的时候，JavaScript会自动识别一个字符是字面形式表示，还是Unicode形式表示。输出给用户的时候，所有字符都会转成字面形式。</p>
        <p>我们还需要知道，每个字符在JavaScript内部都是以16位（即2个字节）的UTF-16格式储存。也就是说，JavaScript的单位字符长度固定为16位长度，即2个字节。</p>
        <p>通过上一节中学习的内容可以发现“parseInt()”和“parseFloat()”方法可以将字符串转换为数值，同时也能对数组元素中的第一个元素进行数值转化。这说明在某种程度上，字符串和数组是有一点联系的。实际上，数组拥有的很多属性，字符串也同样具备。来看这样一个控制台输出例子：</p>
        <code class="indent">
            <img src="img/code/jscode/code-js-082.jpg">
        </code>
        <p>通过上例可以清晰地发现，字符串和数组是何等的相似。实际上，数组和字符串是可以互相转换的，这就需要用到两个方法：“<em>split()</em>”和“<em>join()</em>”。</p>
        <code class="indent">
            <img src="img/code/jscode/code-js-083.jpg">
        </code>
        <p>从上例可以分析出“split()”方法可以将一个数组，转换为一个字符串，若添加一个用引号引起来的参数，得出的数组就会以该参数进行分割（上例中使用的是“,”作为参数，用其它字符作为参数同样可行），若所给参数是一个空引号""，则形成的数组会合并为一个数组元素项。同样的，“join()”方法是将一个数组元素转换为一个字符串，根据给出的参数对结果中的字符串进行分割，或者不进行分割。当然，这两个方法也可以不给出参数，用它们内置的默认值进行处理，如：</p>
        <code class="indent">
            <img src="img/code/jscode/code-js-084.jpg">
        </code>
    </section>
    <!-- 字符串操作 -->
    <section>
        <h3>字符串操作</h3>
        <p>String对象是JavaScript原生提供的<em title="数值型、字符串和布尔型">三个包装对象</em>之一，用来生成字符串的包装对象。既然作为对象的字符串肯定就有自己的方法。如“valueOf()”方法就是用于返回对象所包装的那个字符串。字符串的包装对象是一个类似数组的对象（但仍然不是数组）。</p>
        <code class="indent">
            <img src="img/code/jscode/code-js-087.jpg">
        </code>
        <p>String()除了可以作为构造函数，实际上它可以将JavaScript任何允许类型的值都转换为字符串：</p>
        <code class="indent">
            <img src="img/code/jscode/code-js-088.jpg">
        </code>
        <p>从上面例子中控制台输出的结果可以发现，JavaScript六种数据类型都可以转换为字符串。object（对象型）稍微有一些特殊，对于数组型的对象转换为了一串去掉方括号的字符串，对于普通对象又转换成了加上方括号，并且里面的值变成了“object Object”的形式。可见，对象是一种比较特殊的数据格式，这在后面我们会对对象这个类型进行详细讲解。</p>
        <p>对于字符串这个对象的操作，除了基本的String()方法以外，还主要有以下方法：</p>
        <dl class="attrExplain">
            <dt>concat()方法</dt>
            <dd>string()方法虽然可以将非字符串的值转换为字符串，但在某些应用场景中，尤其是将“数值型”的值进行字符串拼接的时候，这个方法难免会显得有些“冗余”，这个时候可以使用<em>concat()</em>方法来进行，会使这一操作更加直观，而且它不会改变变量的原始值：</dd>
            <dd>
                <code>
                    <img src="img/code/jscode/code-js-089.jpg">
                </code>
            </dd>
            <dd>在使用这个方法有一点需要注意，就是用于接收运算结果的变量的值的类型直接决定了拼接运算是否能成功，或者拼接后的结果是什么类型的值。</dd>
            <dd>
                <code>
                    <img src="img/code/jscode/code-js-090.jpg">
                </code>
            </dd>
            <dd>另外，使用concat()方法还可以不需要定义一个空变量（空字符串、空数组等）来接收拼接结果，该方法允许参与拼接的变量本身去拼接后续的变量，可以是字符串，也可以是数组，但若为其它类型的变量程序会报错。</dd>
            <dd>
                <code>
                    <img src="img/code/jscode/code-js-091.jpg">
                </code>
            </dd>

            <dt>slice()方法</dt>
            <dd>slice()方法用于从原字符串取出子字符串并返回，不改变原字符串。它的第一个参数是子字符串的开始位置，第二个参数是子字符串的结束位置（不含该位置）。如果省略第二个参数，则表示子字符串一直到原字符串结束。如果参数是负值，表示从结尾开始倒数计算的位置，即该负值加上字符串长度。</dd>
            <dd>
                <code>
                    <img src="img/code/jscode/code-js-092.jpg">
                </code>
            </dd>
            <dd>对于通过下标取值要有一个编程的基本概念，就是程序中的下标是从0开始计位的，而当下标做为负数的时候，是没有“-0”的概念的，所以如果下标是负数，那开始计位的数是从<em>-1</em>开始的。对于slice()方法而言，无论结束的位置为正数还是负数的下标，一般都不包含该下标。了解这一点之后，再看上例控制台的输出结果会更加容易理解一些。</dd>
            <dd>另外，该方法如果开始的下标小于结束的下标（负数则为开始的下标大于结束的下标），返回的结果则为空“”，这一点可以自行实践。</dd>

            <dt>substring()方法</dt>
            <dd>它与slice作用相同，但有一些奇怪的规则，因此不建议使用这个方法，优先使用slice。这些奇怪的规则表现如：</dd>
            <dd>
                <code>
                    <img src="img/code/jscode/code-js-093.jpg">
                </code>
            </dd>
            <dd>当开始的下标大于结束的下标，该方法这会自动调整两个值的位置进行输出。如果参数是负数，substring()方法会自动将负数转为0，无论参数是1个还是2个的情况（很多时候我们并不希望这样的结果）。上例中方法内的“-2,-5”相当于被转化成了“0,0”，即开始位和结束位都为0。</dd>

            <dt>substr()方法</dt>
            <dd>substr()方法的作用和slice()方法仍然很相似，不同的是当substr()方法配置了第二个参数后，该值不再是指字符串的结束位置，而是<em>字符串的长度（length）</em>了。该方法的参数同样可以为负数，也是从字符串的最后一位开始计数。由于第二位参数表示返回的长度，所以，如果第二位参数的值为负数，那将自动被转化为0，返回的内容为一个空字符串。</dd>
            <dd>
                <code>
                    <img src="img/code/jscode/code-js-094.jpg">
                </code>
            </dd>

            <dt>indexOf()方法和lastIndexOf()方法</dt>
            <dd>这两个方法用于确定一个字符串在另一个字符串中的位置，都返回一个整数，表示匹配开始的位置。如果返回-1，就表示不匹配。两者的区别在于，indexOf从字符串头部开始匹配，lastIndexOf从尾部开始匹配。但需要注意的是，无论是从开始位置匹配还是从结束位置匹配，返回的数值都是从开始位置也就是从0开始计位的。</dd>
            <dd>
                <code>
                    <img src="img/code/jscode/code-js-095.jpg">
                </code>
            </dd>
            <dd>该方法的在字符串操作的使用场景比较多，如判断用户上传文件的类型，判断当前浏览器类型，用户表单信息的填写是否包含某个必要字符等。例如，现在已经通过获取图片“src”属性得到了用户最新上传的一张图片，然后做出相应的程序处理（为了简化程序，“相应的程序处理”我们仍然用函数在控制台的输出代替）：</dd>
            <dd>
                <code>
                    <img src="img/code/jscode/code-js-096.jpg">
                </code>
            </dd>
            <dd>在控制台中调用函数“imgUpload”并将获取到的用户图片地址作为参数，运行结果如下：</dd>
            <dd>
                <code>
                    <img src="img/code/jscode/code-js-097.jpg">
                </code>
            </dd>

            <dt>trim()方法</dt>
            <dd>trim()方法用于去除字符串两端的空格（同时包含换行符“\n”，制表符"\t、\v"和回车符“\r”），返回一个新字符串，不改变原字符串。但若空格及其类似字符包含在字符内部（即字符串开始的首字符和末字符之间），该方法是不能够去除的。</dd>
            <dd>
                <code>
                    <img src="img/code/jscode/code-js-098.jpg">
                </code>
            </dd>

            <dt>match()方法</dt>
            <dd>match()方法用于确定原字符串是否匹配某个子字符串，返回一个数组，数组元素为匹配的第一个字符串。如果没有找到匹配，则返回null。match()方法还可以使用正则表达式作为参数。</dd>
            <dd>
                <code>
                    <img src="img/code/jscode/code-js-099.jpg">
                </code>
            </dd>

            <dt>search()方法</dt>
            <dd>search()方法的用法等同于match()方法，但是返回值为匹配的第一个位置。如果没有找到匹配，则返回-1。search()方法还可以使用正则表达式作为参数。</dd>
            <dd>
                <code>
                    <img src="img/code/jscode/code-js-100.jpg">
                </code>
            </dd>

            <dt>replace()方法</dt>
            <dd>replace方法用于替换匹配的子字符串，一般情况下只替换第一个匹配（除非使用带有g修饰符的正则表达式）。replace()方法还可以使用正则表达式作为参数。</dd>
            <dd>
                <code>
                    <img src="img/code/jscode/code-js-101.jpg">
                </code>
            </dd>
        </dl>
        <p>关于字符串的方法需要说明一点，就是这些方法很多都是可以互相嵌套使用的。例如，现在想获取浏览器地址栏内某些信息以助于对浏览器地址信息的更改，就可以用到一个这样的字符串方法的组合：</p>
        <code class="indent">
            <img src="img/code/jscode/code-js-102.jpg">
        </code>
        <p>字符串所提供的方法可以帮助自己在处理一些复杂的功能需求的时候有更多的有效应对手段，但这仍然建立在对这些方法足够熟悉的基础上。要想使自己的技术水平高于其它Web前端开发者，就得从一些细节的方法入手，并利用这些方法来完善自己的架构思维。掌握得方法越全面，在进行针对需求实现的思考时，遇到的瓶颈就会越少。</p>
    </section>
    <!-- 章节练习 -->
    <section class="unitPractice">
        <h3>&lt;章节练习一&gt;</h3>
        <p>为了巩固之前所学的知识，根据上面提供的网址，经过观察分析，实现以下需求：</p>
        <p>1、取出网址中的网络传输协议的类型（可能为：ftp、http、https等）；</p>
        <p>2、取出网址中当前的文件名及后缀名（假设不知道当前的文件名“index.html”）。</p>
    </section>
    <!-- Base64转码 -->
    <section>
        <h3>Base64转码</h3>
        <p>Base64是一种编码方法，可以将任意字符转成可打印字符。这种编码方法，一开始的作用是为了不显示特殊字符，简化程序的处理。但因为这种编码方式比较复杂，现在使用JavaScript的开发者都少有涉及这种编码方式，所以更多时候都将其作为一种加密手段在使用。该编码提供两个方法来转换字符：</p>
        <dl class="attrExplain">
            <dt>btoa()</dt>
            <dd>将字符串或二进制值转为Base64编码</dd>

            <dt>atob()</dt>
            <dd>将Base64编码转为原来的编码</dd>
        </dl>
        <p>我们先来看一个将普通字符串转换为Base64格式编码，再将该格式转换为普通字符串在控制台中输出的例子：</p>
        <code class="indent">
            <img src="img/code/jscode/code-js-085.jpg">
        </code>
        <p>可以从示例中的前两个结果很直观的发现，我们首先是用btoa()将一串普通的字符串“aulence”转换成为了Base64码“YXVsZW5jZQ==”，然后我们将得出的Base64码通过atob()方法将得到的Base64码再次成功地转换成为了普通的字符串“aulence”。示例中的后两个结果我们是对二进制数“0b1001”进行了相同方式的转换，最后得到字符串“9”（若用parseInt(0b1001)，得出的结果为数字9，而不是字符串“9”）。可见这两种方法是可以将字符串和Base64码在两种格式之间互相转换的，但是要注意的是，通过atob()这种方法是不能还原出数值型的值的，这为我们拼接密码字符串提供了便利（因为“+”运算符只能做拼接运算了）。但在模型情况下需要得出的结果是一个数值型的值，那就得用我本章中第第二节内容“数值的转换”提供的三种方法来进行转换了。</p>
        <p>但是在使用这两个方法的时候需要注意的是，这两个方法不支持对<em>非ASC II字符</em>转换为Base64码，否则在浏览器中会报错。如果要对非ASC II的字符进行Base64转码，需要用到两个对URI组件编码的函数：“encodeURIComponent()”函数和“decodeURIComponent()”函数，前者能将字符串作为 URI 组件进行编码，后者能将encodeURIComponent() 函数编码的 URI 进行解码。如例：</p>
        <code class="indent">
            <img src="img/code/jscode/code-js-086.jpg">
        </code>
        <p>利用这个原理，就可以将非ASC II的稍微重要的机密字符串进行这样简单的加密传输，在传输的终端再进行一次解密。这样的方式对于熟悉计算机底层语言的黑客来说也许算不上什么高级手段，但对于一般用户和普通开发人员而言，这样的加密手段肯定是会让他们摸不着北的。但是，稍微高级一点的加密算法通常都不是用一两种编码转换或者几种二进制运算的方式来编写的，这些高级加密算法非常之复杂，令很多从事黑客技术多年的人都“望而生怯”。</p>
        <p>作为一个前端开发者，也许掌握那些高级加密手段一时间没有什么用。但在现在的用户体验设计主流思维方向都在追求着一种便捷性、易用性、效率性，哪怕曾经对安全要求特别高的金融行业、金融软件在现今都让“6位纯数字密码”取代了之前强制要求的“数字+字母组合密码”，类似微信支付、京东支付等这些金融类或电子商务类的App（Application，现在在计算机术语中通常指“移动端的应用软件”）甚至出现了免密支付。这和曾经要求类似“密码至少要求8位，需要以英文字母+数字+符号组成”这样的要求“背道而驰”了，这让很多用户反而对密码的安全产生了顾虑。</p>
        <p>其实针对这个问题大可不必有太多顾虑，因为现在的支付平台都提供了在线冻结支付相关的功能，只要一个电话核对用户相关的信息，只要基本能符合（不要求所有问题都能答得上）即可冻结支付的账户，这为手机不小心遗失提供了一个安全的便捷保障。如果手机还在你手里那就更不用担心了，因为现在的支付平台都是和设备绑定的，也就是同样一个密码只能在同一台设备上进行使用，如果要使用另外一台设备上使用，或者是IP段于原设备不符，都是需要提供绑定设备提供的短信验证码的。所以，就算是支付密码被别人知道了，他们拿去也是什么事也干不了的。而且现在的“6位数字密码”的键盘在绝大部分App上都并非是手机上提供的“原生”数字键盘，而是程序员“自己做”的，这样一来木马程序就无法获取到用户通过键盘输入使产生的“<em title="无论在PC端还是在移动端，键盘上的每个键都对应着一个键值，如PC主键盘区的“Enter”键的键值“keyCode”为数字13，这在我们以后的JavaScript事件的键盘事件一节中会讲到">键值</em>”，也就无法直接地获知用户到底输入的是什么，甚至根本就不认为用户正在进行着输入的行为，截获用户输入就更无从谈起了。</p>
    </section>
    <!-- 章节练习 -->
    <!--<section class="unitPractice">
        <h3>&lt;章节练习一&gt;</h3>
        <p>
    </section>-->

</root>






