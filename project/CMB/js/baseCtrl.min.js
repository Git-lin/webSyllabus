var VERIFY={isNull:/\s+/,isNum:/^[0-9]*$/};var POPUP={box:$(".popupBox"),mask:$(".maskLayer"),content:$(".popupContent")};$(function(){var d=$(".stagesRateDet").children("p").length;for(var a=0;a<d;a++){var c=$(".stagesRateDet").children("p");var b=c.eq(a).children(".lblStagesRate:first"),e=c.eq(a).children(".lblStagesRate:last");b.prepend("<span class='icon-calendar'></span>");e.prepend("<span class='icon-calculate'></span>")}$(".article section h1").click(function(){var f=$(this).children("span:last").attr("class");if(f=="icon-plus"){$(this).children("span:last").attr("class","icon-minus");$(this).next().slideDown(300);$(this).parent().siblings().children("h1").children("span.icon-minus").attr("class","icon-plus");$(this).parent().siblings().children("div").slideUp(300)}else{$(this).children("span:last").attr("class","icon-plus");$(this).next().slideUp(300)}})});$(document).on("click",".popupBox",function(){$(this).hide()});$(document).on("keyup","#byStagesNum",function(){var g=$(this).val();var f=VERIFY.isNum.test(g),c=VERIFY.isNull.test(g);if(c){$(this).val("");POPUP.box.show();POPUP.content.html("<span class='icon-info2'></span>不能含有空格！");BASECSS.eleCentered(POPUP.content)}else{if(!f){$(this).val("");POPUP.box.show();POPUP.content.html("<span class='icon-info2'></span>只能输入数字！");BASECSS.eleCentered(POPUP.content)}else{$(".byStagesItem .columnGroup").html("<legend>单笔分期利息</legend><p class='noneVal'>请先输入分期数</p>");for(var d=0;d<parseInt(g);d++){var b=d;var a='<div class="singleByStage"><label class="lblStyle_120">第'+(parseInt(b)+1)+'笔分期金额：</label><input id="bsm_'+b+'" type="text" class="userInput w100" value="" placeholder="请输入分期金额" maxlength = "14">\n<span class="units">元</span><label class="ml30">分期数：</label><select id="byStage_'+b+'" class="w60 h20 f14"><option>2</option><option>3</option><option>6</option><option>10</option><option>12</option><option>18</option><option>24</option></select><br><div class="result_single ml15"><label>本期利息：</label><span class="curint ft-c_orange pl5 pr5">0</span><span class="units">元</span></div><div class="result_single"><label>总利息：</label><span class="totalint ft-c_orange pl5 pr5">0</span><span class="units">元</span></div><div class="result_single"><label>本期本息：</label><span class="tatal_oneline ft-c_orange pl5 pr5">0</span><span class="units">元</span></div><div class="result_single"><label>总本息：</label><span class="tatal_all ft-c_orange pl5 pr5">0</span><span class="units">元</span></div></div>';$(".byStagesItem .columnGroup").append(a)}}}var e=$("#byStagesNum").val();if(e!=""){$(".byStagesItem .columnGroup p.noneVal").remove()}});$(document).on("keyup","input[id^='bsm_']",function(){singleByStage_count_txt(this)});$(document).on("change","select[id^='byStage_']",function(){singleByStage_count_slt(this)});$(document).on("keyup","#notByStagesNum",function(){notByStagesCount()});$(document).on("keyup","#notByStagesDay",function(){notByStagesCount()});function singleByStage_count_txt(l){var g=$(l),o=parseInt(g.val()),j=parseInt(g.nextAll("[id^='byStage_']").val()),f=0,a=0,u=0,n=0,k=0;switch(j){case 2:u=100;break;case 3:u=90;break;case 6:u=75;break;case 10:u=70;break;case 12:u=66;break;case 18:u=68;break;case 24:u=68;break}if(o==""){o=0;$(".byStagesItem .columnGroup").html("<legend>单笔分期利息</legend><p class='noneVal'>请先输入分期数</p>")}f=(o*u)/10000;a=((o*u)/10000)*j;n=(o/j)+f;k=n*j;g.siblings(".result_single").children(".curint").text(f.toFixed(2));g.siblings(".result_single").children(".totalint").text(a.toFixed(2));g.siblings(".result_single").children(".tatal_oneline").text(n.toFixed(2));g.siblings(".result_single").children(".tatal_all").text(k.toFixed(2));var t=$(".curint"),w=t.length,m=0;for(var s=0;s<w;s++){var c=parseFloat(t.eq(s).text());m+=c}$("#allCurint").text(m.toFixed(2));var r=$(".totalint"),h=r.length,b=0;for(var s=0;s<h;s++){var x=parseFloat(r.eq(s).text());b+=x}$("#allTotalint").text(b.toFixed(2));var d=0,q=$(".singleByStage"),e=q.length;for(var s=0,p=3;s<e;s++){var v=parseFloat(q.eq(s).children(".result_single").eq(p).children(".tatal_all").text());d+=v}$("#allTotal").text(d.toFixed(2))}function singleByStage_count_slt(m){var h=$(m),d=parseInt(h.val()),j=parseInt(h.prevAll("input[id^='bsm_']").val()),g=0,a=0,u=0,o=0,l=0;switch(d){case 2:u=100;break;case 3:u=90;break;case 6:u=75;break;case 10:u=70;break;case 12:u=66;break;case 18:u=68;break;case 24:u=68;break}g=(j*u)/10000;a=((j*u)/10000)*d;o=(j/d)+g;l=o*d;h.siblings(".result_single").children(".curint").text(g.toFixed(2));h.siblings(".result_single").children(".totalint").text(a.toFixed(2));h.siblings(".result_single").children(".tatal_oneline").text(o.toFixed(2));h.siblings(".result_single").children(".tatal_all").text(l.toFixed(2));var t=$(".curint"),w=t.length,n=0;for(var s=0;s<w;s++){var c=parseFloat(t.eq(s).text());n+=c}$("#allCurint").text(n.toFixed(2));var r=$(".totalint"),k=r.length,b=0;for(var s=0;s<k;s++){var x=parseFloat(r.eq(s).text());b+=x}$("#allTotalint").text(b.toFixed(2));var e=0,q=$(".singleByStage"),f=q.length;for(var s=0,p=3;s<f;s++){var v=parseFloat(q.eq(s).children(".result_single").eq(p).children(".tatal_all").text());e+=v}$("#allTotal").text(e.toFixed(2))}function singleByStage_count(m){var h=$(m),e=h.parent(),j=e.find("input[id^='bsm_']"),l=e.find("input[id^='byStage_']"),g=0,a=0,t=0;switch(l){case 2:t=100;break;case 3:t=90;break;case 6:t=75;break;case 10:t=70;break;case 12:t=66;break;case 18:t=68;break;case 24:t=68;break}g=(j*t)/10000;a=((j*t)/10000)*l;h.nextAll(".curint").text(g.toFixed(2));h.nextAll(".totalint").text(a.toFixed(2));var s=$(".curint"),v=s.length,n=0;for(var r=0;r<v;r++){var c=parseFloat(s.eq(r).text());n+=c}$("#allCurint").text(n.toFixed(2));var q=$(".totalint"),k=q.length,b=0;for(var r=0;r<k;r++){var w=parseFloat(q.eq(r).text());b+=w}$("#allTotalint").text(b.toFixed(2));var d=0,p=$(".singleByStage"),f=p.length;for(var r=0,o=3;r<f;r++){var u=parseFloat(p.eq(r).children(".result_single").eq(o).children(".tatal_all").text());d+=u}$("#allTotal").text(d.toFixed(2))}function notByStagesCount(){var a=$("#notByStagesNum").val(),c=a==""?0:parseFloat(a),f=c*5/10000,b=c/10,d=b+(f*30),e=f*30;if(c==0){$("#notByStages_least").text(0);$("#notByStages_least_int").text(0)}else{$("#notByStages_least").text(d.toFixed(2));$("#notByStages_least_int").text(e.toFixed(2))}};