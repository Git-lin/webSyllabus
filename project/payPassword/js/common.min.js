var page=document.getElementsByTagName("page");var passwordVal={correct:"0b0001,0b0010,0b0011,0b0100,0b0101,0b0110",current:[]};var payInfo={name:"",money:0};window.onload=function(){loadFriendData(friendsData);var c=document.getElementById("friendsList").getElementsByTagName("li"),d=c.length;for(var b=0;b<d;b++){c[b].index=b;c[b].onclick=function(){tabPage(this,page[2]);payInfoWrite(payInfo)}}backPrevPage();var a=document.getElementById("alertPayComp");a.onclick=function(){var e=document.getElementById("inputMoney").value;if(e<0.01){alert("输入的金额至少为￥0.01元");return}else{if(e>5000){alert("单日交易金额不得超出￥5000元");return}else{payInfo.money=Number(e).toFixed(2)}}writnPwdComponet(payInfo.name,payInfo.money)}};function loadFriendData(b){var d=b.length;var c=document.getElementById("friendsList");for(var a=0;a<d;a++){c.innerHTML+='<li><img src="'+b[a].photoURL+'"><span>'+b[a].name+"</span>";"</li>"}}function tabPage(b,a){var c=b.index;payInfo.name=friendsData[c].name;payInfo.money=friendsData[c].money;a.style.right="0"}function backPrevPage(){var a=document.getElementsByClassName("backPrevPage"),c=a.length;for(var b=0;b<c;b++){a[b].onclick=function(){this.parentElement.parentElement.style.right="-100%";var d=document.getElementsByTagName("input"),f=d.length;for(var e=0;e<f;e++){d[e].value=""}}}}function payInfoWrite(b){var a=document.getElementById("payee");a.textContent=b.name}function writnPwdComponet(d,b){var a=page[2].getElementsByClassName("passwordComponet")[0];a.innerHTML+='<div class="maskLayer"></div><div class="payInfoBox"><div class="payInfoBox-main"><div class="closeBox">×</div><p>请输入支付密码</p><p class="objName">向<span id="payee-componet" class="payee">'+d+'</span>转账</p><p class="money">￥<span>'+b+'</span></p><p class="erro"></p><div class="payPwd"><div></div><div></div><div></div><div></div><div></div><div></div></div></div></div><div data-keyboard-number=""><div class="numKey">7</div><div class="numKey">8</div><div class="numKey">9</div><div class="numKey">4</div><div class="numKey">5</div><div class="numKey">6</div><div class="numKey">1</div><div class="numKey">2</div><div class="numKey">3</div><div></div><div class="numKey">0</div><div class="delKey">←</div></div>';var a=document.getElementsByClassName("passwordComponet")[0];a.style.display="block";var c=document.getElementsByClassName("passwordComponet")[0].getElementsByClassName("closeBox")[0];c.onclick=function(){removePwdComponet()};passwordInput(a)}function removePwdComponet(){var a=document.getElementsByClassName("passwordComponet")[0];a.innerHTML="";a.style.display="none"}function passwordInput(f){var a=f.getElementsByClassName("numKey"),d=a.length;var j=f.getElementsByClassName("payPwd")[0],g=j.children;var h=0;for(var c=0;c<d;c++){a[c].onclick=function(){h++;var s=this.textContent;passwordVal.current.push(s);g[h-1].innerHTML="<i></i>";if(passwordVal.current.length===6){var q=passwordVal.correct.split(",");var p=0;for(var n=0;n<passwordVal.current.length;n++){if(~~q[n]===~~passwordVal.current[n]){p++}}if(p===6){page[3].style.right="0";removePwdComponet();var o=page[3].getElementsByClassName("payee")[0];o.textContent=payInfo.name;var r=page[3].getElementsByClassName("moneyVal")[0];r.textContent=payInfo.money;h=0;p=0;passwordVal.current=[]}else{var l=g.length;for(var m=0;m<l;m++){g[m].innerHTML=""}var i=f.getElementsByClassName("erro")[0];i.textContent="密码输入错误，请重试！";h=0;p=0;passwordVal.current=[]}}}}var e=f.getElementsByClassName("delKey")[0];var b=f.getElementsByClassName("payPwd")[0];e.onclick=function(){if(h===0){return}else{h--;var i=b.getElementsByTagName("i");i[i.length-1].remove();passwordVal.current.pop()}}};